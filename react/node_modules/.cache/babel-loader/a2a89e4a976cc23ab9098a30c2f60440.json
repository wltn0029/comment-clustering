{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jisu/comment-clustering/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import axios from'axios';import React,{Component}from'react';import'./UrlForm.css';var apiKey='AIzaSyBhrKlcf07TRvzF5RPeKOxYSBC06TP-JUc';var getVideoPageInfo=function getVideoPageInfo(videoId){return\"https://www.googleapis.com/youtube/v3/videos?                                        part=id&key=\".concat(apiKey,\"&id=\").concat(videoId);};// ref : https://stackoverflow.com/questions/3452546/how-do-i-get-the-youtube-video-id-from-a-url\nvar getVideoId=function getVideoId(videoUrl){var regExp=/^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;var match=videoUrl.match(regExp);if(match&&match[2].length===11){return match[2];}else{return undefined;}};var UrlForm=/*#__PURE__*/function(_Component){_inherits(UrlForm,_Component);var _super=_createSuper(UrlForm);function UrlForm(props){var _this;_classCallCheck(this,UrlForm);_this=_super.call(this,props);_this.handleClick=function(e){if(!_this.inputRef.current){return;}if(_this.inputRef.current.value.length===0){_this.setState({correctInput:undefined});return;}var videoId=getVideoId(_this.inputRef.current.value);if(!videoId){_this.setState({correctInput:false});return;}var checkUrlValid=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(videoId){var videoPageInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(getVideoPageInfo(videoId));case 2:videoPageInfo=_context.sent;if(videoPageInfo.data.pageInfo.totalResults===0){_this.setState({correctInput:false});}else{_this.props.handleClick(videoId);_this.setState({correctInput:true});}case 4:case\"end\":return _context.stop();}}},_callee);}));return function checkUrlValid(_x){return _ref.apply(this,arguments);};}();checkUrlValid(videoId);};_this.inputRef=/*#__PURE__*/React.createRef();// correctInput\n// undefined : no link\n// true : right link\n// false : wrong link\n_this.state={correctInput:undefined};_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}_createClass(UrlForm,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){if(nextState.correctInput!==this.state.correctInput){return true;}return false;}},{key:\"render\",value:function render(){var checkInputIconClass=this.state.correctInput?'right-input':this.state.correctInput===false?'wrong-input':'no-input';console.log(\"hello\");console.log(this.state.videoId);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title-main\",children:\"Comment Clustering\"}),/*#__PURE__*/_jsx(\"div\",{className:\"blank\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-text\",placeholder:\"write youtube url\",ref:this.inputRef}),/*#__PURE__*/_jsx(\"button\",{className:\"arrange-btn\",onClick:this.handleClick,children:\"rearrange\"})]}),this.state.correctInput===false&&/*#__PURE__*/_jsx(\"span\",{className:\"wrong-text\",children:\"Please insert correct url\"})]});}}]);return UrlForm;}(Component);export default UrlForm;","map":{"version":3,"sources":["/Users/jisu/comment-clustering/react/src/components/UrlForm.js"],"names":["axios","React","Component","apiKey","getVideoPageInfo","videoId","getVideoId","videoUrl","regExp","match","length","undefined","UrlForm","props","handleClick","e","inputRef","current","value","setState","correctInput","checkUrlValid","get","videoPageInfo","data","pageInfo","totalResults","createRef","state","bind","nextProps","nextState","checkInputIconClass","console","log"],"mappings":"kpCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,eAAP,CAEA,GAAMC,CAAAA,MAAM,CAAG,yCAAf,CACA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,OAAD,mHAC6BF,MAD7B,gBAC0CE,OAD1C,GAAzB,CAGA;AACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAC,QAAQ,CAAI,CAC7B,GAAIC,CAAAA,MAAM,CAAG,kEAAb,CACA,GAAIC,CAAAA,KAAK,CAAGF,QAAQ,CAACE,KAAT,CAAeD,MAAf,CAAZ,CACA,GAAIC,KAAK,EAAIA,KAAK,CAAC,CAAD,CAAL,CAASC,MAAT,GAAoB,EAAjC,CAAqC,CACnC,MAAOD,CAAAA,KAAK,CAAC,CAAD,CAAZ,CACD,CAFD,IAEO,CACL,MAAOE,CAAAA,SAAP,CACD,CACF,CARD,C,GAUMC,CAAAA,O,kGACJ,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAoBnBC,WApBmB,CAoBL,SAACC,CAAD,CAAO,CACnB,GAAI,CAAC,MAAKC,QAAL,CAAcC,OAAnB,CAA4B,CAC1B,OACD,CAED,GAAI,MAAKD,QAAL,CAAcC,OAAd,CAAsBC,KAAtB,CAA4BR,MAA5B,GAAuC,CAA3C,CAA8C,CAC5C,MAAKS,QAAL,CAAc,CACZC,YAAY,CAAET,SADF,CAAd,EAGA,OACD,CAED,GAAMN,CAAAA,OAAO,CAAGC,UAAU,CAAC,MAAKU,QAAL,CAAcC,OAAd,CAAsBC,KAAvB,CAA1B,CACA,GAAI,CAACb,OAAL,CAAe,CACb,MAAKc,QAAL,CAAc,CACZC,YAAY,CAAE,KADF,CAAd,EAGA,OACD,CAED,GAAMC,CAAAA,aAAa,0FAAG,iBAAMhB,OAAN,0JACQL,CAAAA,KAAK,CAACsB,GAAN,CAAUlB,gBAAgB,CAACC,OAAD,CAA1B,CADR,QACdkB,aADc,eAEpB,GAAIA,aAAa,CAACC,IAAd,CAAmBC,QAAnB,CAA4BC,YAA5B,GAA6C,CAAjD,CAAoD,CAClD,MAAKP,QAAL,CAAc,CACZC,YAAY,CAAE,KADF,CAAd,EAGD,CAJD,IAIO,CACL,MAAKP,KAAL,CAAWC,WAAX,CAAuBT,OAAvB,EACA,MAAKc,QAAL,CAAc,CACZC,YAAY,CAAE,IADF,CAAd,EAGD,CAXmB,sDAAH,kBAAbC,CAAAA,aAAa,4CAAnB,CAcAA,aAAa,CAAChB,OAAD,CAAb,CACD,CAvDkB,CAEjB,MAAKW,QAAL,cAAgBf,KAAK,CAAC0B,SAAN,EAAhB,CACA;AACA;AACA;AACA;AACA,MAAKC,KAAL,CAAa,CACXR,YAAY,CAAGT,SADJ,CAAb,CAGA,MAAKG,WAAL,CAAmB,MAAKA,WAAL,CAAiBe,IAAjB,+BAAnB,CAViB,aAWlB,C,wFAEqBC,S,CAAWC,S,CAAW,CAC3C,GAAIA,SAAS,CAACX,YAAV,GAA2B,KAAKQ,KAAL,CAAWR,YAA1C,CAAwD,CACnD,MAAO,KAAP,CACH,CACD,MAAO,MAAP,CACD,C,uCAuCQ,CACP,GAAMY,CAAAA,mBAAmB,CAAG,KAAKJ,KAAL,CAAWR,YAAX,CACE,aADF,CAEE,KAAKQ,KAAL,CAAWR,YAAX,GAA4B,KAA5B,CACA,aADA,CAEA,UAJ9B,CAMAa,OAAO,CAACC,GAAR,CAAY,OAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,KAAKN,KAAL,CAAWvB,OAAvB,EACA,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,aAAK,SAAS,CAAC,QAAf,wBACE,YAAK,SAAS,CAAC,YAAf,gCADF,cAIE,YAAK,SAAS,CAAC,OAAf,EAJF,cAKE,cAAO,SAAS,CAAC,YAAjB,CACE,WAAW,CAAC,mBADd,CAEE,GAAG,CAAE,KAAKW,QAFZ,EALF,cASE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAE,KAAKF,WAA9C,uBATF,GADF,CAaG,KAAKc,KAAL,CAAWR,YAAX,GAA4B,KAA5B,eACC,aAAM,SAAS,CAAG,YAAlB,uCAdJ,GADF,CAsBD,C,qBAzFmBlB,S,EA4FtB,cAAeU,CAAAA,OAAf","sourcesContent":["import axios from 'axios';\nimport React, { Component } from 'react';\nimport './UrlForm.css';\n\nconst apiKey = 'AIzaSyBhrKlcf07TRvzF5RPeKOxYSBC06TP-JUc';\nconst getVideoPageInfo = (videoId) => `https://www.googleapis.com/youtube/v3/videos?\\\n                                        part=id&key=${apiKey}&id=${videoId}`\n\n// ref : https://stackoverflow.com/questions/3452546/how-do-i-get-the-youtube-video-id-from-a-url\nconst getVideoId = videoUrl => {\n  let regExp = /^.*(youtu\\.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n  let match = videoUrl.match(regExp);\n  if (match && match[2].length === 11) {\n    return match[2];\n  } else {\n    return undefined;\n  }\n}\n\nclass UrlForm extends Component {\n  constructor(props) {\n    super(props);\n    this.inputRef = React.createRef();\n    // correctInput\n    // undefined : no link\n    // true : right link\n    // false : wrong link\n    this.state = {\n      correctInput : undefined\n    }\n    this.handleClick = this.handleClick.bind(this)\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n   if (nextState.correctInput !== this.state.correctInput) {\n        return true\n    }\n    return false;\n  }\n\n  handleClick = (e) => {\n    if (!this.inputRef.current) {\n      return;\n    } \n    \n    if (this.inputRef.current.value.length === 0) {\n      this.setState({\n        correctInput: undefined\n      })\n      return;\n    }\n\n    const videoId = getVideoId(this.inputRef.current.value);\n    if (!videoId ) {\n      this.setState({\n        correctInput: false\n      })\n      return;\n    } \n\n    const checkUrlValid = async(videoId) => {\n      const videoPageInfo = await axios.get(getVideoPageInfo(videoId));\n      if (videoPageInfo.data.pageInfo.totalResults === 0) {\n        this.setState({\n          correctInput: false\n        })\n      } else {\n        this.props.handleClick(videoId);\n        this.setState({\n          correctInput: true\n        })\n      }\n    }\n\n    checkUrlValid(videoId);\n  }\n\n  render() {\n    const checkInputIconClass = this.state.correctInput ? \n                                  'right-input' : \n                                  this.state.correctInput === false ?\n                                  'wrong-input' :\n                                  'no-input'\n    \n    console.log(\"hello\")\n    console.log(this.state.videoId)\n    return (\n      <React.Fragment>\n        <div className=\"center\">\n          <div className=\"title-main\">\n            Comment Clustering\n          </div>\n          <div className=\"blank\"></div>\n          <input className=\"input-text\"\n            placeholder=\"write youtube url\"\n            ref={this.inputRef}\n          />\n          <button className=\"arrange-btn\" onClick={this.handleClick}>rearrange</button>\n          {/* <div className={checkInputIconClass}></div> */}\n        </div>\n        {this.state.correctInput === false && (\n          <span className = \"wrong-text\">\n            Please insert correct url\n          </span>\n        )}\n      </React.Fragment>\n      \n    );\n  }\n}\n\nexport default UrlForm;"]},"metadata":{},"sourceType":"module"}