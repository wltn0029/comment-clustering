(this["webpackJsonpcomment-clustering"]=this["webpackJsonpcomment-clustering"]||[]).push([[0],{48:function(e,t,n){},50:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},74:function(e,t){},76:function(e,t){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),i=n(41),s=n.n(i),o=(n(48),n(3)),u=n.n(o),l=n(10),d=n(5),h=n(6),p=n(8),m=n(7),f=(n(50),n(15)),v=n(9),j=n.n(v),b=(n(67),function(e){return"https://www.googleapis.com/youtube/v3/videos?                                        part=id&key=".concat("AIzaSyBhrKlcf07TRvzF5RPeKOxYSBC06TP-JUc","&id=").concat(e)}),g=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleClick=function(e){if(a.inputRef.current)if(0!==a.inputRef.current.value.length){var t=function(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length?t[2]:void 0}(a.inputRef.current.value);if(t)(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(b(t));case 2:0===e.sent.data.pageInfo.totalResults?a.setState({correctInput:!1}):(a.props.handleClick(t),a.setState({correctInput:!0}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t);else a.setState({correctInput:!1})}else a.setState({correctInput:void 0})},a.inputRef=c.a.createRef(),a.state={correctInput:void 0},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(h.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return t.correctInput!==this.state.correctInput}},{key:"render",value:function(){this.state.correctInput||this.state.correctInput;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsxs)("div",{className:"center",children:[Object(a.jsx)("div",{className:"title-main",children:"Comment Clustering"}),Object(a.jsx)("div",{className:"blank"}),Object(a.jsx)("input",{className:"input-text",placeholder:"write youtube url",ref:this.inputRef}),Object(a.jsx)("button",{className:"arrange-btn",onClick:this.handleClick,children:"rearrange"})]}),!1===this.state.correctInput&&Object(a.jsx)("span",{className:"wrong-text",children:"Please insert correct url"})]})}}]),n}(r.Component),O=n(18),x=(n(68),"AIzaSyBhrKlcf07TRvzF5RPeKOxYSBC06TP-JUc"),C=function(e){return"https://www.googleapis.com/youtube/v3/videos?part=snippet&key=".concat(x,"                              &id=").concat(e)},y=function(e){return"https://www.googleapis.com/youtube/v3/channels?part=snippet&key=".concat(x,"                              &id=").concat(e)},I=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).updateVideoInfo=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c,i,s,o,l,d,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return console.log("videoId"),e.next=5,j.a.get(C(t));case 5:return n=e.sent,r=Object(O.a)({},n.data.items[0].snippet),c=r.channelId,i=r.title,s=r.description,o=r.thumbnails,l=o.default.url,e.next=10,j.a.get(y(c));case 10:d=e.sent,h=d.data.items[0].snippet.thumbnails.default.url,a.setState({videoTitle:i,videoThumbnail:l,description:s,channelImg:h});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={videoTitle:"",description:"",videoThumbnail:"",channelImg:""},a}return Object(h.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.videoId!==this.props.videoId?(this.updateVideoInfo(e.videoId),!0):t.videoTitle!==this.state.videoTitle||t.videoThumbnail!==this.state.videoThumbnail||t.description!==this.state.default||t.channelImg!==this.state.channelImg}},{key:"render",value:function(){var e=this.state,t=e.videoTitle,n=(e.videoThumbnail,e.description);e.channelImg;return Object(a.jsxs)("div",{className:"video-info",children:[Object(a.jsx)("div",{className:"video-title-info",children:t&&Object(a.jsx)("text",{className:"video-title",children:t})}),Object(a.jsx)("div",{children:n&&Object(a.jsx)("div",{className:"video-description",children:n})})]})}}]),n}(r.Component),k=(n(69),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleClick=function(e){var t=a.props,n=t.expand,r=t.category;n?a.props.handleClick(""):a.props.handleClick(r)},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.expand,n=e.comments,r=t?n:n.slice(0,1),c=t?"Close":"Show More",i="pos"===this.props.category?"POSITIVE":"neu"===this.props.category?"NEUTRALITY":"NEGATIVE";return void 0!==t&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"category",children:[Object(a.jsx)("span",{className:"category-name",children:i}),Object(a.jsx)("button",{className:"thread-btn",onClick:this.handleClick,children:c})]}),Object(a.jsx)("div",{children:r.map((function(e){return Object(a.jsx)(T,{authorDisplayName:e.authorDisplayName,authorProfileImageUrl:e.authorProfileImageUrl,textOriginal:e.textOriginal},e.id)}))})]})}}]),n}(r.Component)),T=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,t=e.authorDisplayName,n=(e.authorProfileImageUrl,e.textOriginal);return Object(a.jsx)(c.a.Fragment,{children:Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsx)("span",{className:"user-name",children:t}),Object(a.jsx)("span",{children:" : "}),Object(a.jsx)("span",{className:"comment-text",children:n})]})})}}]),n}(r.Component),w=k,N=n(42),S=n.n(N),U=n.p+"static/media/korean_result.25dc3181.txt",P=n.p+"static/media/english_result.3ca58fdc.txt",R=function(e){return"https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&key=".concat("AIzaSyBhrKlcf07TRvzF5RPeKOxYSBC06TP-JUc","                                        &videoId=").concat(e,"&maxResults=100")},z="MXuog-hJfes",F=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).analyzeComments=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(t!==z&&"Tm9Wzzr-DUI"!==t){e.next=6;break}return n=t===z?P:U,a.readTextFile(n),e.abrupt("return");case 6:return e.next=8,j.a.get(R(t));case 8:r=e.sent,c=r.data.items.map((function(e){var t=e.snippet.topLevelComment.id,n=Object(O.a)({},e.snippet.topLevelComment.snippet);return{id:t,authorDisplayName:n.authorDisplayName,authorProfileImageUrl:n.authorProfileImageUrl,textOriginal:n.textOriginal}})),i={rawData:c},s={method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i),httpsAgent:new S.a.Agent({rejectUnauthorized:!1})},fetch("https://143.248.144.129:8080/main",s).then((function(e){return e.json()})).then((function(e){a.renderComments(e)})).catch((function(e){console.log("fetch server failed with error ".concat(e))}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readTextFile=function(e){fetch(e).then((function(e){return e.text()})).then((function(e){a.renderComments(JSON.parse(e))}))},a.renderComments=function(e){a.setState({pos:e.pos,neg:e.neg,neu:e.neu})},a.isSelected=function(e){return""!==a.state.selectedCategory&&(a.state.selectedCategory===e||void 0)},a.expandCommentThreads=function(e){console.log("expandcommentthread",e),a.setState({selectedCategory:e})},a.state={neg:[],pos:[],neu:[],selectedCategory:""},a}return Object(h.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.videoId!==this.props.videoId?(this.analyzeComments(e.videoId),!0):t.neg!==this.state.neg||t.pos!==this.state.pos||t.neu!==this.state.neu||t.selectedCategory!==this.state.selectedCategory}},{key:"render",value:function(){var e=this.state,t=e.pos,n=e.neg,r=e.neu;return Object(a.jsx)("div",{className:"comments",children:(0!==t.length||0!==n.length||0!==r.length)&&Object(a.jsxs)("div",{children:[Object(a.jsx)(w,{category:"pos",comments:this.state.pos,expand:this.isSelected("pos"),handleClick:this.expandCommentThreads}),Object(a.jsx)(w,{category:"neu",comments:this.state.neu,expand:this.isSelected("neu"),handleClick:this.expandCommentThreads}),Object(a.jsx)(w,{category:"neg",comments:this.state.neg,expand:this.isSelected("neg"),handleClick:this.expandCommentThreads})]})})}}]),n}(r.Component),A=["MXuog-hJfes","Tm9Wzzr-DUI"],D="https://143.248.144.129:8080/main",J=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={videoId:"",fakeVideoId:1},e.onChangeVideoUrl=function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j.a.get(D).then((function(t){return e.setState({videoId:n})})).catch((function(t){var a=n===A[0]?0:n===A[1]?1:e.state.fakeVideoId;e.setState({videoId:A[a],fakeVideoId:a?0:1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(g,{handleClick:this.onChangeVideoUrl}),Object(a.jsx)(I,{videoId:this.state.videoId}),Object(a.jsx)(F,{videoId:this.state.videoId})]})}}]),n}(c.a.Component),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(J,{})}),document.getElementById("root")),V()}},[[91,1,2]]]);
//# sourceMappingURL=main.1f0077ef.chunk.js.map